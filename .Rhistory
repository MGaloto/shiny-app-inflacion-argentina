renv::init()
renv::status()
renv::snapshot()
renv::status()
renv::snapshot()
library(flexdashboard)
library(tidyverse)
library(shiny)
library(readxl)
library(highcharter)
library(RColorBrewer)
indec_total = read_excel('indecnacional_total.xlsx')
indec = read_excel('indecnacional.xlsx')
indec$period_filter = substr(as.Date(indec$periodos), 1, 7)
library(flexdashboard)
library(tidyverse)
library(shiny)
library(readxl)
library(highcharter)
library(RColorBrewer)
indec_total = read_excel('indecnacional_total.xlsx')
indec = read_excel('indecnacional.xlsx')
indec$period_filter = substr(as.Date(indec$periodos), 1, 7)
library(flexdashboard)
library(tidyverse)
library(shiny)
library(readxl)
library(highcharter)
library(RColorBrewer)
indec_total = read_excel('indecnacional_total.xlsx')
indec = read_excel('indecnacional.xlsx')
indec$period_filter = substr(as.Date(indec$periodos), 1, 7)
View(indec)
View(indec_total)
tags$p(paste0(pull(indec[,c('salud')])[nrow(indec)], ' %'))
paste0(pull(indec[,c('salud')])[nrow(indec)], ' %')
indec[,c('salud')])[nrow(indec)]
indec[,c('salud')][nrow(indec)]
indec[,c('salud')]
indec[,c('Salud')]
sort(names(indec[,-c(14,15,16,17,18)])
sort(names(indec[,-c(14,15,16,17,18)]))
names(indec[,-c(14,15,16,17,18)])
vector = c('periodos', 'year', 'Mes', 'month', 'period_filter')
names(indec[,-vector])
vector = c('periodos', 'year', 'Mes', 'month', 'period_filter')
names(indec[,-c(vector)])
vector = c('periodos', 'year', 'Mes', 'month', 'period_filter')
names(indec[,-c('periodos', 'year', 'Mes', 'month', 'period_filter')])
names(indec[,-c(14,15,16,17,18)])
vector = c(14,15,16,17,18)
names(indec[,-vector])
vector = list('periodos', 'year', 'Mes', 'month', 'period_filter')
names(indec[,-vector])
library(flexdashboard)
library(tidyverse)
library(shiny)
library(readxl)
library(highcharter)
library(RColorBrewer)
indec_total = read_excel('indecnacional_total.xlsx')
indec = read_excel('indecnacional.xlsx')
indec$period_filter = substr(as.Date(indec$periodos), 1, 7)
indec$periodos[nrow(indec)]
substr(indec$periodos[nrow(indec)],1,7)
library(flexdashboard)
library(tidyverse)
library(shiny)
library(readxl)
library(highcharter)
library(RColorBrewer)
indec_total = read_excel('indecnacional_total.xlsx')
indec = read_excel('indecnacional.xlsx')
indec$period_filter = substr(as.Date(indec$periodos), 1, 7)
((((pull(indec_total[,c('Salud')])/100)+1)      *  ((lag(pull(indec_total[,c('Salud')]), 1)/100)+1)	*  ((lag(pull(indec_total[,c('Salud')]), 2)/100)+1)		*  ((lag(pull(indec_total[,c('Salud')]), 3)/100)+1)    *  ((lag(pull(indec_total[,c('Salud')]), 4)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 5)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 6)/100)+1)	*  ((lag(pull(indec_total[,c('Salud')]), 7)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 8)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 9)/100)+1)	*  ((lag(pull(indec_total[,c('Salud')]), 10)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 11)/100)+1) - 1 ) * 100),1)[nrow(indec_total)]
((((pull(indec_total[,c('Salud')])/100)+1)      *  ((lag(pull(indec_total[,c('Salud')]), 1)/100)+1)	*  ((lag(pull(indec_total[,c('Salud')]), 2)/100)+1)		*  ((lag(pull(indec_total[,c('Salud')]), 3)/100)+1)    *  ((lag(pull(indec_total[,c('Salud')]), 4)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 5)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 6)/100)+1)	*  ((lag(pull(indec_total[,c('Salud')]), 7)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 8)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 9)/100)+1)	*  ((lag(pull(indec_total[,c('Salud')]), 10)/100)+1)				*  ((lag(pull(indec_total[,c('Salud')]), 11)/100)+1) - 1 ) * 100),1)
pull(indec_total[,c('Salud')])/100)+1
(pull(indec_total[,c('Salud')])/100)+1
(pull(indec_total[,c('Salud')])/100)+1
(pull(indec_total[,c('Salud')])/100)
lag((pull(indec_total[,c('Salud')])/100),1)
(pull(indec_total[,c('Salud')])/100)
lag((pull(indec_total[,c('Salud')])/100), 0)
(pull(indec_total[,c('Salud')])/100)
number_lag = 0
lag((pull(indec_total[,c('Salud')])/100), number_lag)
lag((pull(indec_total[,c('Salud')])/100), number_lag)[45]
lag((pull(indec_total[,c('Salud')])/100), number_lag)[0]
lag((pull(indec_total[,c('Salud')])/100), number_lag)[1]
lag((pull(indec_total[,c('Salud')])/100), number_lag)[-1]
lag((pull(indec_total[,c('Salud')])/100), number_lag)
list(lag((pull(indec_total[,c('Salud')])/100), number_lag))
lag((pull(indec_total[,c('Salud')])/100), number_lag)
class(lag((pull(indec_total[,c('Salud')])/100), number_lag))
lag((pull(indec_total[,c('Salud')])/100), number_lag)
lag((pull(indec_total[,c('Salud')])/100), number_lag)
list(lag((pull(indec_total[,c('Salud')])/100), number_lag))[0]
list(lag((pull(indec_total[,c('Salud')])/100), number_lag))[1]
list(lag((pull(indec_total[,c('Salud')])/100), number_lag))[2]
list(lag((pull(indec_total[,c('Salud')])/100), number_lag))[1]
list(lag((pull(indec_total[,c('Salud')])/100), number_lag))[1][1]
list(lag((pull(indec_total[,c('Salud')])/100), number_lag))[1][4]
list(lag((pull(indec_total[,c('Salud')])/100), number_lag))
lag((pull(indec_total[,c('Salud')])/100), number_lag)
lag((pull(indec_total[,c('Salud')]) / 100), number_lag)[61]
lag((pull(indec_total[,c('Salud')]) / 100), number_lag)
lag((pull(indec_total[,c('Salud')]) / 100), number_lag)[nrow(indec_total)]
varNames <- function(df, itemtoadd){
number_lag = 0
values = c()
for (i in 0:12) {
value_lag = lag((pull(indec_total[,c('Salud')]) / 100), i)[nrow(indec_total)]
values[i] <- value_lag
}
return(values)
}
varNames(indec_total)
varNames <- function(df, itemtoadd){
number_lag = 0
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c('Salud')]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return(values)
}
varNames(indec_total)
interanual <- function(df){
number_lag = 0
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c('Salud')]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return(values)
}
interanual(indec_total)
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return(values)
}
interanual(indec_total, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return(prod(values))
}
interanual(indec_total, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return(values)
}
interanual(indec_total, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return((prod(values) - 1) * 100)
}
interanual(indec_total, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return(round((prod(values) - 1) * 100),2)
}
interanual(indec_total, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return((prod(values) - 1) * 100)
}
interanual(indec_total, 'Salud')
library(flexdashboard)
library(tidyverse)
library(shiny)
library(readxl)
library(highcharter)
library(RColorBrewer)
indec_total = read_excel('indecnacional_total.xlsx')
indec = read_excel('indecnacional.xlsx')
indec$period_filter = substr(as.Date(indec$periodos), 1, 7)
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
print(i)
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:11) {
print(i)
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag
}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:13) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((indec_total[,c(val)]) / 100) + 1), i)[nrow(indec_total)]
values[i] <- value_lag}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i] <- value_lag}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:13) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i] <- value_lag}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:13) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i] <- value_lag}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i] <- value_lag}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual(indec, 'Salud')
View(indec)
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i] <- value_lag}
return(values)
}
interanual(indec, 'Salud')
lag((pull((indec[,c('Salud')]) / 100) + 1), i)[nrow(indec)]
lag((pull((indec[,c('Salud')]) / 100) + 1), 0)[nrow(indec)]
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i] <- value_lag}
return(values)
}
interanual(indec, 'Salud')
lag((pull((indec[,c('Salud')]) / 100) + 1), 0)[nrow(indec)]
lag((pull((indec[,c('Salud')]) / 100) + 1), 0)[nrow(indec)]
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i] <- value_lag}
return(values)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 1:12) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i] <- value_lag}
return(values)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
print(value_lag)
values[i] <- value_lag}
return(values)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:12) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
print(value_lag)
values[i + 1] <- value_lag}
return(values)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
print(value_lag)
values[i + 1] <- value_lag}
return(values)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
print(value_lag)
values[i + 1] <- value_lag}
return(prod(values))
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i + 1] <- value_lag}
return(prod(values))
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i + 1] <- value_lag}
return((prod(values) - 1) * 100)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i + 1] <- value_lag}
return(round((prod(values) - 1) * 100),2)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i + 1] <- value_lag}
product = (prod(values) - 1) * 100
return(product)
}
interanual(indec, 'Salud')
interanual <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i + 1] <- value_lag}
product = (prod(values) - 1) * 100
return(round(product,2))
}
interanual(indec, 'Salud')
round(((((pull(indec[,c('Salud')])/100)+1) *  ((lag(pull(indec[,c('Salud')]), 1)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 2)/100)+1)		*  ((lag(pull(indec[,c('Salud')]), 3)/100)+1)*  ((lag(pull(indec[,c('Salud')]), 4)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 5)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 6)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 7)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 8)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 9)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 10)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 11)/100)+1) - 1 ) * 100),1)[12:nrow(indec)]
((((pull(indec[,c('Salud')])/100)+1) *  ((lag(pull(indec[,c('Salud')]), 1)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 2)/100)+1)		*  ((lag(pull(indec[,c('Salud')]), 3)/100)+1)*  ((lag(pull(indec[,c('Salud')]), 4)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 5)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 6)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 7)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 8)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 9)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 10)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 11)/100)+1) - 1 ) * 100)[12:nrow(indec)]
((((pull(indec[,c('Salud')])/100)+1) *  ((lag(pull(indec[,c('Salud')]), 1)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 2)/100)+1)		*  ((lag(pull(indec[,c('Salud')]), 3)/100)+1)*  ((lag(pull(indec[,c('Salud')]), 4)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 5)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 6)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 7)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 8)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 9)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 10)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 11)/100)+1) - 1 ) * 100)
((((pull(indec[,c('Salud')])/100)+1) *  ((lag(pull(indec[,c('Salud')]), 1)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 2)/100)+1)		*  ((lag(pull(indec[,c('Salud')]), 3)/100)+1)*  ((lag(pull(indec[,c('Salud')]), 4)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 5)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 6)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 7)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 8)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 9)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 10)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 11)/100)+1) - 1 ) * 100)
((((pull(indec[,c('Salud')])/100)+1) *  ((lag(pull(indec[,c('Salud')]), 1)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 2)/100)+1)		*  ((lag(pull(indec[,c('Salud')]), 3)/100)+1)*  ((lag(pull(indec[,c('Salud')]), 4)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 5)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 6)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 7)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 8)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 9)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 10)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 11)/100)+1) - 1 ) * 100)[12:nrow(indec)]
((((pull(indec[,c('Salud')])/100)+1) *  ((lag(pull(indec[,c('Salud')]), 1)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 2)/100)+1)		*  ((lag(pull(indec[,c('Salud')]), 3)/100)+1)*  ((lag(pull(indec[,c('Salud')]), 4)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 5)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 6)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 7)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 8)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 9)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 10)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 11)/100)+1) - 1 ) * 100)
interanual_values <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i + 1] <- value_lag}
product = (prod(values) - 1) * 100
return(round(product,2))
}
interanual_values(indec, 'Salud')
interanual_values <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)[nrow(df)]
values[i + 1] <- value_lag}
product = (prod(values) - 1) * 100
return(round(product,2))
}
interanual_values(indec, 'Salud')
((((pull(indec[,c('Salud')])/100)+1) *  ((lag(pull(indec[,c('Salud')]), 1)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 2)/100)+1)		*  ((lag(pull(indec[,c('Salud')]), 3)/100)+1)*  ((lag(pull(indec[,c('Salud')]), 4)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 5)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 6)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 7)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 8)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 9)/100)+1)	*  ((lag(pull(indec[,c('Salud')]), 10)/100)+1)				*  ((lag(pull(indec[,c('Salud')]), 11)/100)+1) - 1 ) * 100)
interanual_values <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)
values[i + 1] <- value_lag}
product = (prod(values) - 1) * 100
return(round(product,2))
}
interanual_values(indec, 'Salud')
((lag(pull(indec[,c('Salud')]), 1)/100)+1)
interanual_values <- function(df, val){
values = c()
for (i in 0:11) {
value_lag = lag((pull((df[,c(val)]) / 100) + 1), i)
product = (prod(values) - 1) * 100
return(round(product,2))
}
interanual_values(indec, 'Salud')
